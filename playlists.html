<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playlist Page</title>
  <style>
    body {
      font-family: 'proxima-nova', sans-serif;
      margin: 0;
      background-image: linear-gradient(to bottom right, rgb(221, 219, 219), #b7c9e2, rgb(221, 219, 219));
      color: #000000;
    }

    header {
      background-color: #36454F;
      padding: 1em;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    nav {
      display: flex;
      gap: 1em;
    }

    nav a {
      color: whitesmoke;
      text-decoration: none;
      position: relative;
      padding: 5px 15px;
      font-size: 18px;
      transition: color 0.3s ease;
    }

    nav a:hover {
      color: #b7c9e2;
    }

    nav a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 2px;
      background-color: #b7c9e2;
      transition: width 0.3s ease;
    }

    nav a:hover::after {
      width: 100%;
    }

    .logo {
      color: whitesmoke;
      text-decoration: none;
      position: relative;
      padding: 5px 15px;
      font-size: 35px;
      transition: color 0.3s ease;
    }

    .playlists-container {
      padding: 2em 1em;
      display: flex;
      flex-wrap: wrap;
      gap: 1em;
      justify-content: flex-start;
    }

    .new-playlist-box, .playlist-item {
      border-radius: 10px;
      padding: 1em;
      width: 200px;
      height: 200px;
      text-align: center;
      box-sizing: border-box;
      position: relative;
    }

    .new-playlist-box {
      border: 2px dashed #000;
      cursor: pointer;
      color: #000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .playlist-item {
      border: 2px solid #000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .playlist-item img {
      width: 95%;
      height: auto;
      border-radius: 10px;
    }

    .playlist-item h3 {
      margin: 0;
    }

    .playlist-item p {
      margin: 0;
    }

    .playlist-item button {
      background-color: #FF9494;
      border: none;
      padding: 0.5em 1em;
      cursor: pointer;
      border-radius: 5px;
      color: #000;
      margin-top: 1em;
    }

    footer {
      background-color: #36454F;
      padding: 1em;
      text-align: center;
    }

    .footer-links,
    .social-media {
      display: flex;
      justify-content: center;
      gap: 1em;
    }

    .footer-links a,
    .social-media a {
      color: whitesmoke;
      text-decoration: none;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.4);
    }

    .modal-content {
      background-color: #fefefe;
      margin: 10% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 800px;
      border-radius: 10px;
      position: relative;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    .form-group {
      margin-bottom: 1em;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5em;
    }

    .form-group input {
      width: 100%;
      padding: 0.5em;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .podcast-option {
      display: flex;
      align-items: center;
      margin-bottom: 0.5em;
    }

    .podcast-option label {
      margin-left: 0.5em;
    }

    .color-picker-container {
      display: flex;
      gap: 1em;
      margin-bottom: 1em;
    }

    .color-picker-container label {
      margin-right: 0.5em;
    }

    .color-picker-container input[type="color"] {
      border: none;
      height: 2em;
      width: 2em;
    }

    .podcast-list {
      list-style-type: none;
      padding: 0;
    }

    .podcast-list li {
      margin-bottom: 1em;
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    .podcast-list li img {
      width: 50px;
      height: 50px;
      margin-right: 0.5em;
    }

    .banner {
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: #000000;
      color: #FFFFFF;
      padding: 0.2em 0.5em;
      transform: rotate(-45deg);
      transform-origin: left top;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <a href="#" class="logo">PodsForSquads</a>
    <nav>
      <a href="#">Home</a>
      <a href="#">Playlists</a>
      <a href="#">Community</a>
    </nav>
  </header>

  <!-- Playlist Section -->
  <div id="playlist-container" class="playlists-container">
    <div id="create-playlist-button" class="new-playlist-box">Create New Playlist</div>
    <div id="playlists"></div>
  </div>

  <!-- Modal for Creating a New Playlist -->
  <div id="create-playlist-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Create New Playlist</h2>
      <div class="form-group">
        <input type="text" id="search-input" placeholder="Search for podcasts...">
      </div>
      <div id="search-results"></div>
      <button id="create-playlist">Create Playlist</button>
    </div>
  </div>

  <script>
    // JavaScript Code

    // API Key and base URL
    const API_KEY = 'cb2038d4dbd841b39dec5309c31b2d6a';
    const BASE_URL = 'https://listen-api.listennotes.com/api/v2';

    // Elements
    const createPlaylistButton = document.getElementById('create-playlist-button');
    const createPlaylistModal = document.getElementById('create-playlist-modal');
    const closeButton = document.querySelector('.close');
    const searchInput = document.getElementById('search-input');
    const searchResults = document.getElementById('search-results');
    const createPlaylist = document.getElementById('create-playlist');
    const playlistsContainer = document.getElementById('playlists');

    let selectedPodcasts = [];

    // Show the modal
    createPlaylistButton.addEventListener('click', () => {
      createPlaylistModal.style.display = 'block';
    });

    // Close the modal
    closeButton.addEventListener('click', () => {
      createPlaylistModal.style.display = 'none';
      searchResults.innerHTML = '';
    });

    // Search for podcasts
    searchInput.addEventListener('input', async (event) => {
      const query = event.target.value.trim();
      if (query) {
        const response = await fetch(`${BASE_URL}/search?q=${query}&type=podcast`, {
          headers: {
            'X-ListenAPI-Key': API_KEY
          }
        });
        const data = await response.json();
                // Display search results
                function displaySearchResults(results) {
          searchResults.innerHTML = '';
          results.forEach(podcast => {
            const podcastItem = document.createElement('div');
            podcastItem.classList.add('podcast-option');
            podcastItem.innerHTML = `
              <input type="checkbox" value="${podcast.id}">
              <label>${podcast.title}</label>
            `;
            searchResults.appendChild(podcastItem);
          });

          // Add event listeners for checkboxes
          document.querySelectorAll('.podcast-option input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', (event) => {
              const podcastId = event.target.value;
              if (event.target.checked) {
                selectedPodcasts.push(podcastId);
              } else {
                selectedPodcasts = selectedPodcasts.filter(id => id !== podcastId);
              }
            });
          });
        }

        // Handle search input
        async function handleSearch() {
          const query = searchInput.value.trim();
          if (query) {
            const response = await fetch(`${BASE_URL}/search?q=${query}&type=podcast`, {
              headers: {
                'X-ListenAPI-Key': API_KEY
              }
            });
            const data = await response.json();
            displaySearchResults(data.results);
          } else {
            searchResults.innerHTML = '';
          }
        }

        searchInput.addEventListener('input', handleSearch);

        // Create the playlist
        createPlaylist.addEventListener('click', () => {
          if (selectedPodcasts.length === 0) {
            alert('Please select at least one podcast.');
            return;
          }

          // Create and display the playlist
          const playlistItem = document.createElement('div');
          playlistItem.classList.add('playlist-item');
          playlistItem.innerHTML = `
            <h3>New Playlist</h3>
            <p>Selected Podcasts: ${selectedPodcasts.length}</p>
            <button onclick="viewPlaylist()">View Playlist</button>
          `;

          playlistsContainer.appendChild(playlistItem);
          createPlaylistModal.style.display = 'none';
          searchResults.innerHTML = '';
          selectedPodcasts = [];
        });

        // Function to view playlist (Placeholder)
        function viewPlaylist() {
          alert('Viewing playlist');
        }

        // Close the modal if clicked outside of it
        window.onclick = function(event) {
          if (event.target === createPlaylistModal) {
            createPlaylistModal.style.display = 'none';
            searchResults.innerHTML = '';
          }
        }
      </script>
    </body>
  </html>
